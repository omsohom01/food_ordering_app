<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Food Ordering Application</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 0;
            text-align: center;
        }
        .container {
            width: 80%;
            margin: auto;
        }
        .hidden {
            display: none;
        }
        .img-container {
            margin-top: 20px;
        }
        .img-container img {
            width: 200px;
            height: auto;
            margin: 10px;
        }
        .order-summary {
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Food Ordering Application</h1>
        
        <!-- Food Selection Section -->
        <div id="food-selection">
            <h2>Select Your Food Items</h2>
            <button onclick="showOrderForm()">Start Ordering</button>
        </div>

        <!-- Order Form Section -->
        <div id="order-form" class="hidden">
            <h2>Order Form</h2>
            <div>
                <input type="text" id="name" placeholder="Your Name" required>
                <input type="text" id="roll_number" placeholder="Your Roll Number" required>
                <input type="text" id="department" placeholder="Your Department" required>
            </div>
            <div>
                <label>
                    <input type="checkbox" id="burger" data-price="50"> Burger - $50
                </label>
                <label>
                    <input type="checkbox" id="chickenroll" data-price="70"> Chicken Roll - $70
                </label>
                <label>
                    <input type="checkbox" id="chowmin" data-price="60"> Chowmin - $60
                </label>
                <label>
                    <input type="checkbox" id="momo" data-price="40"> Momo - $40
                </label>
            </div>
            <button onclick="submitOrder()">Submit Order</button>
        </div>

        <!-- Order Summary Section -->
        <div id="order-summary" class="hidden">
            <h2>Order Summary</h2>
            <div id="summary-details"></div>
            <div class="order-summary">
                <h3>Order Bill</h3>
                <p id="total-price"></p>
            </div>
            <button onclick="viewOrderDetails()">View Submitted Details</button>
        </div>

        <!-- Images -->
        <div class="img-container">
            <img src="images/rcciit.jpg" alt="RCCIIT">
            <img src="images/canteen.jpg" alt="Canteen">
            <img src="images/food.jpg" alt="Food">
        </div>
    </div>

    <script>
        function showOrderForm() {
            document.getElementById('food-selection').classList.add('hidden');
            document.getElementById('order-form').classList.remove('hidden');
        }

        function submitOrder() {
            const name = document.getElementById('name').value;
            const rollNumber = document.getElementById('roll_number').value;
            const department = document.getElementById('department').value;

            const items = document.querySelectorAll('#order-form input[type=checkbox]');
            let orderSummary = '';
            let totalPrice = 0;

            items.forEach(item => {
                if (item.checked) {
                    orderSummary += `${item.id.charAt(0).toUpperCase() + item.id.slice(1)} - $${item.dataset.price}<br>`;
                    totalPrice += parseInt(item.dataset.price);
                }
            });

            const data = {
                name: name,
                roll_number: rollNumber,
                department: department,
                order_summary: orderSummary,
                total_price: totalPrice
            };

            fetch('/submit_order', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(result => {
                document.getElementById('order-form').classList.add('hidden');
                document.getElementById('order-summary').classList.remove('hidden');
                document.getElementById('summary-details').innerHTML = result.order_summary;
                document.getElementById('total-price').innerText = `Total Price: $${result.total_price}`;
            });
        }

        function viewOrderDetails() {
            window.location.href = '/view_order_details'; // Redirect to a route that shows the submitted details
        }
    </script>
</body>
</html>
